<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RocketMCC</title>

<style>
body, html { margin:0; padding:0; font-family:Arial; overflow:hidden; background:#0d0d0d; color:#fff; }
#background { position:fixed; top:0; left:0; z-index:0; }
.content { position:relative; z-index:1; text-align:center; padding:50px; }

.site-logo {
  width:140px;
  max-width:40vw;
  margin-bottom:20px;
  filter: drop-shadow(0 0 20px rgba(255,0,0,0.7));
}

h1 { color:#ff0000; font-size:48px; margin-bottom:30px; }

.sections { display:flex; gap:20px; justify-content:center; margin-bottom:30px; }
.section {
  background:rgba(20,0,0,0.6);
  border:2px solid #ff0000;
  border-radius:10px;
  padding:15px 30px;
  font-size:18px;
  font-weight:bold;
  color:#ff0000;
  cursor:pointer;
  transition:all 0.3s ease;
}
.section:hover { background:rgba(255,0,0,0.3); box-shadow:0 0 25px rgba(255,0,0,0.7); transform:scale(1.05); }
.section.active { background:rgba(255,0,0,0.25); box-shadow:0 0 30px rgba(255,0,0,0.8); transform:scale(1.05); }

.listWrapper { display:flex; flex-wrap:wrap; justify-content:center; gap:15px; }

.clientBox, .serverBox, .newsBox {
  background: rgba(20,0,0,0.5);
  border:2px solid #ff0000;
  border-radius:10px;
  padding:20px;
  width:220px;
  transition: all 0.3s ease;
  cursor:pointer;
  backdrop-filter: blur(5px);
  text-align:center;
}
.clientBox:hover, .serverBox:hover, .newsBox:hover {
  background: rgba(255,0,0,0.2);
  box-shadow: 0 0 20px rgba(255,0,0,0.7);
  transform: scale(1.05);
}

.server-status { margin-top:8px; font-weight:bold; }
.server-status.online { color:#00ff00; }
.server-status.offline { color:#ff0000; }

button {
  margin-top:10px;
  padding:8px 15px;
  border:none;
  border-radius:5px;
  background: rgba(255,0,0,0.8);
  color:#fff;
  cursor:pointer;
  font-weight:bold;
}
button:hover { background: rgba(255,85,85,0.9); }

#onlineCounter {
  margin-bottom:20px;
  font-size:18px;
  color:#ff0000;
  text-shadow:0 0 10px #ff0000;
}
</style>
</head>

<body>

<canvas id="background"></canvas>

<div class="content">
  <img src="logo.png" class="site-logo">
  <h1>RocketMCC</h1>

  <div id="onlineCounter">
    Online users: <span id="onlineCount">0</span>
  </div>

  <div class="sections">
    <div class="section active" id="clientsBtn">Clients</div>
    <div class="section" id="serversBtn">Servers</div>
    <div class="section" id="forumBtn">Forum</div>
    <div class="section" id="newsBtn">News</div>
  </div>

  <div id="mainContent"></div>
</div>

<script>
// -------------------- BACKGROUND ANIMATION --------------------
const canvas = document.getElementById('background');
const ctx = canvas.getContext('2d');

let width = canvas.width = window.innerWidth;
let height = canvas.height = window.innerHeight;

const NODE_COUNT = 80;
const MAX_DISTANCE = 150;
let nodes = [];

class Node {
  constructor() {
    this.x = Math.random() * width;
    this.y = Math.random() * height;
    this.vx = (Math.random()-0.5)*1.0;
    this.vy = (Math.random()-0.5)*1.0;
  }
  update() {
    this.x += this.vx;
    this.y += this.vy;
    this.vx += (Math.random()-0.5)*0.05;
    this.vy += (Math.random()-0.5)*0.05;

    const speed = Math.hypot(this.vx, this.vy);
    if (speed > 1.5) {
      this.vx = this.vx / speed * 1.5;
      this.vy = this.vy / speed * 1.5;
    }

    if (this.x < 0 || this.x > width) this.vx *= -1;
    if (this.y < 0 || this.y > height) this.vy *= -1;
  }
  draw() {
    ctx.fillStyle = "#ff0000";
    ctx.beginPath();
    ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
    ctx.fill();
  }
}

function initNodes() {
  nodes = [];
  for (let i = 0; i < NODE_COUNT; i++) nodes.push(new Node());
}
initNodes();

function drawLines() {
  for (let i = 0; i < nodes.length; i++) {
    for (let j = i + 1; j < nodes.length; j++) {
      const dist = Math.hypot(nodes[i].x - nodes[j].x, nodes[i].y - nodes[j].y);
      if (dist < MAX_DISTANCE) {
        ctx.strokeStyle = `rgba(255,0,0,${1 - dist / MAX_DISTANCE})`;
        ctx.beginPath();
        ctx.moveTo(nodes[i].x, nodes[i].y);
        ctx.lineTo(nodes[j].x, nodes[j].y);
        ctx.stroke();
      }
    }
  }
}

function animate() {
  ctx.clearRect(0, 0, width, height);
  nodes.forEach(n => { n.update(); n.draw(); });
  drawLines();
  requestAnimationFrame(animate);
}
animate();

window.addEventListener('resize', () => {
  width = canvas.width = window.innerWidth;
  height = canvas.height = window.innerHeight;
  initNodes();
});

// -------------------- SERVER STATUS CHECK --------------------
function checkEaglerServer(wssUrl, timeout = 3000) {
  return new Promise(resolve => {
    let ws;
    try { ws = new WebSocket(wssUrl); }
    catch { resolve(false); return; }

    const timer = setTimeout(() => {
      ws.close();
      resolve(false);
    }, timeout);

    ws.onopen = () => {
      clearTimeout(timer);
      ws.close();
      resolve(true);
    };

    ws.onerror = () => {
      clearTimeout(timer);
      resolve(false);
    };
  });
}

// -------------------- MAIN CONTENT --------------------
document.addEventListener("DOMContentLoaded", () => {
  const mainContent = document.getElementById("mainContent");
  const sections = document.querySelectorAll(".section");

  const servers = [
    { name:"Hyper Network", ip:"wss://eag.hyper-network.net" },
    { name:"WebMC", ip:"wss://play.webmc.fun" },
    { name:"ArchMC", ip:"wss://mc.arch.lol" },
    { name:"Jonarchy", ip:"wss://8b4t.org" },
    { name:"Radiant Network", ip:"wss://eagler.radiantnet.store" },
    { name:"NexoX", ip:"wss://nexo-app.net" },
    { name:"AdderallMC", ip:"wss://adderall.ir" },
    { name:"VanillaMC", ip:"wss://vanillamc.org" },
    { name:"VoidsentMC", ip:"wss://mc.voidsent.net" },
    { name:"Lamp Network", ip:"wss://mc.lamplifesteal.xyz" },
    { name:"ExoticMC", ip:"wss://el.exoticmc.xyz" },
    { name:"SkeletonMC", ip:"wss://skeletonmc.eagler.host" }
  ];

  sections.forEach(btn => {
    btn.onclick = () => {
      sections.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      if (btn.id === "forumBtn") {
        window.open("https://eaglercraftarchive.freeflarum.com","_blank");
        return;
      }
      loadSection(btn.id);
    };
  });

  function loadSection(id) {
    mainContent.innerHTML = "";
    const wrapper = document.createElement("div");
    wrapper.className = "listWrapper";
    mainContent.appendChild(wrapper);

    if (id === "serversBtn") {
      servers.forEach(s => {
        const box = document.createElement("div");
        box.className = "serverBox";

        box.innerHTML = `
          <div>${s.name}</div>
          <div style="font-size:12px;opacity:0.8">${s.ip}</div>
          <div class="server-status">Checking...</div>
        `;

        const statusEl = box.querySelector(".server-status");

        checkEaglerServer(s.ip).then(online => {
          statusEl.textContent = online ? "ðŸŸ¢ ONLINE" : "ðŸ”´ OFFLINE";
          statusEl.className = "server-status " + (online ? "online" : "offline");
        });

        const copyBtn = document.createElement("button");
        copyBtn.textContent = "Copy";
        copyBtn.onclick = () => navigator.clipboard.writeText(s.ip);
        box.appendChild(copyBtn);

        wrapper.appendChild(box);
      });
    } else {
      const box = document.createElement("div");
      box.className = "clientBox";
      box.textContent = "Launch Client";
      wrapper.appendChild(box);
    }
  }

  loadSection("clientsBtn");
});
</script>

<!-- FIREBASE ONLINE COUNTER -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
import { getDatabase, ref, set, onValue, onDisconnect } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js";

const app = initializeApp({
  databaseURL: "https://rocketmcc-network-default-rtdb.firebaseio.com"
});

const db = getDatabase(app);
const id = crypto.randomUUID();
const r = ref(db, "onlineUsers/" + id);

set(r, true);
onDisconnect(r).remove();

onValue(ref(db, "onlineUsers"), snap => {
  document.getElementById("onlineCount").textContent =
    snap.exists() ? snap.size : 0;
});
</script>

</body>
</html>
